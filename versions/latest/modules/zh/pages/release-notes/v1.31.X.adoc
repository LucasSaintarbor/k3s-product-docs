= v1.31.X
:page-role: -toc

[CAUTION]
.Upgrade Notice
====
Before upgrading from earlier releases, be sure to read the Kubernetes https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.31.md#urgent-upgrade-notes[Urgent Upgrade Notes].
====

|===
| Version | Release date | Kubernetes | Kine | SQLite | Etcd | Containerd | Runc | Flannel | Metrics-server | Traefik | CoreDNS | Helm-controller | Local-path-provisioner

| xref:#_release_v1_31_5k3s1[v1.31.5+k3s1]
| Jan 28 2025
| https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.31.md#v1315[v1.31.5]
| https://github.com/k3s-io/kine/releases/tag/v0.13.5[v0.13.5]
| https://sqlite.org/releaselog/3_46_1.html[3.46.1]
| https://github.com/k3s-io/etcd/releases/tag/v3.5.16-k3s1[v3.5.16-k3s1]
| https://github.com/k3s-io/containerd/releases/tag/v1.7.23-k3s2[v1.7.23-k3s2]
| https://github.com/opencontainers/runc/releases/tag/v1.2.4-k3s1[v1.2.4-k3s1]
| https://github.com/flannel-io/flannel/releases/tag/v0.25.7[v0.25.7]
| https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.7.2[v0.7.2]
| https://github.com/traefik/traefik/releases/tag/v2.11.18[v2.11.18]
| https://github.com/coredns/coredns/releases/tag/v1.12.0[v1.12.0]
| https://github.com/k3s-io/helm-controller/releases/tag/v0.16.5[v0.16.5]
| https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.30[v0.0.30]

| xref:#_release_v1_31_4k3s1[v1.31.4+k3s1]
| Dec 18 2024
| https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.31.md#v1314[v1.31.4]
| https://github.com/k3s-io/kine/releases/tag/v0.13.5[v0.13.5]
| https://sqlite.org/releaselog/3_46_1.html[3.46.1]
| https://github.com/k3s-io/etcd/releases/tag/v3.5.16-k3s1[v3.5.16-k3s1]
| https://github.com/k3s-io/containerd/releases/tag/v1.7.23-k3s2[v1.7.23-k3s2]
| https://github.com/opencontainers/runc/releases/tag/v1.2.1[v1.2.1]
| https://github.com/flannel-io/flannel/releases/tag/v0.25.7[v0.25.7]
| https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.7.2[v0.7.2]
| https://github.com/traefik/traefik/releases/tag/v2.11.10[v2.11.10]
| https://github.com/coredns/coredns/releases/tag/v1.12.0[v1.12.0]
| https://github.com/k3s-io/helm-controller/releases/tag/v0.16.5[v0.16.5]
| https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.30[v0.0.30]

| xref:#_release_v1_31_3k3s1[v1.31.3+k3s1]
| Dec 04 2024
| https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.31.md#v1313[v1.31.3]
| https://github.com/k3s-io/kine/releases/tag/v0.13.5[v0.13.5]
| https://sqlite.org/releaselog/3_46_1.html[3.46.1]
| https://github.com/k3s-io/etcd/releases/tag/v3.5.16-k3s1[v3.5.16-k3s1]
| https://github.com/k3s-io/containerd/releases/tag/v1.7.23-k3s2[v1.7.23-k3s2]
| https://github.com/opencontainers/runc/releases/tag/v1.2.1[v1.2.1]
| https://github.com/flannel-io/flannel/releases/tag/v0.25.7[v0.25.7]
| https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.7.2[v0.7.2]
| https://github.com/traefik/traefik/releases/tag/v2.11.10[v2.11.10]
| https://github.com/coredns/coredns/releases/tag/v1.11.3[v1.11.3]
| https://github.com/k3s-io/helm-controller/releases/tag/v0.16.5[v0.16.5]
| https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.30[v0.0.30]

| xref:#_release_v1_31_2k3s1[v1.31.2+k3s1]
| Oct 26 2024
| https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.31.md#v1312[v1.31.2]
| https://github.com/k3s-io/kine/releases/tag/v0.13.2[v0.13.2]
| https://sqlite.org/releaselog/3_46_1.html[3.46.1]
| https://github.com/k3s-io/etcd/releases/tag/v3.5.13-k3s1[v3.5.13-k3s1]
| https://github.com/k3s-io/containerd/releases/tag/v1.7.22-k3s1[v1.7.22-k3s1]
| https://github.com/opencontainers/runc/releases/tag/v1.1.14[v1.1.14]
| https://github.com/flannel-io/flannel/releases/tag/v0.25.6[v0.25.6]
| https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.7.2[v0.7.2]
| https://github.com/traefik/traefik/releases/tag/v2.11.10[v2.11.10]
| https://github.com/coredns/coredns/releases/tag/v1.11.3[v1.11.3]
| https://github.com/k3s-io/helm-controller/releases/tag/v0.16.5[v0.16.5]
| https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.30[v0.0.30]

| xref:#_release_v1_31_1k3s1[v1.31.1+k3s1]
| Sep 19 2024
| https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.31.md#v1311[v1.31.1]
| https://github.com/k3s-io/kine/releases/tag/v0.12.0[v0.12.0]
| https://sqlite.org/releaselog/3_44_0.html[3.44.0]
| https://github.com/k3s-io/etcd/releases/tag/v3.5.13-k3s1[v3.5.13-k3s1]
| https://github.com/k3s-io/containerd/releases/tag/v1.7.21-k3s2[v1.7.21-k3s2]
| https://github.com/opencontainers/runc/releases/tag/v1.1.14[v1.1.14]
| https://github.com/flannel-io/flannel/releases/tag/v0.25.6[v0.25.6]
| https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.7.2[v0.7.2]
| https://github.com/traefik/traefik/releases/tag/v2.11.8[v2.11.8]
| https://github.com/coredns/coredns/releases/tag/v1.11.3[v1.11.3]
| https://github.com/k3s-io/helm-controller/releases/tag/v0.16.4[v0.16.4]
| https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.28[v0.0.28]

| xref:#_release_v1_31_0k3s1[v1.31.0+k3s1]
| Sep 02 2024
| https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.31.md#v1310[v1.31.0]
| https://github.com/k3s-io/kine/releases/tag/v0.12.0[v0.12.0]
| https://sqlite.org/releaselog/3_44_0.html[3.44.0]
| https://github.com/k3s-io/etcd/releases/tag/v3.5.13-k3s1[v3.5.13-k3s1]
| https://github.com/k3s-io/containerd/releases/tag/v1.7.20-k3s1[v1.7.20-k3s1]
| https://github.com/opencontainers/runc/releases/tag/v1.1.12[v1.1.12]
| https://github.com/flannel-io/flannel/releases/tag/v0.25.4[v0.25.4]
| https://github.com/kubernetes-sigs/metrics-server/releases/tag/v0.7.0[v0.7.0]
| https://github.com/traefik/traefik/releases/tag/v2.10.7[v2.10.7]
| https://github.com/coredns/coredns/releases/tag/v1.10.1[v1.10.1]
| https://github.com/k3s-io/helm-controller/releases/tag/v0.16.3[v0.16.3]
| https://github.com/rancher/local-path-provisioner/releases/tag/v0.0.28[v0.0.28]
|===

== Release https://github.com/k3s-io/k3s/releases/tag/v1.31.5+k3s1[v1.31.5+k3s1]

This release updates Kubernetes to v1.31.5, and fixes a number of issues.

For more details on what’s new, see the https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.31.md#changelog-since-v1314[Kubernetes release notes].

=== Changes since v1.31.4+k3s1:

* Add guardrail for etcd-snapshot https://github.com/k3s-io/k3s/pull/11393[(#11393)]
* Backports for 2025-01 https://github.com/k3s-io/k3s/pull/11566[(#11566)]
* Add auto import images for containerd image store https://github.com/k3s-io/k3s/pull/11562[(#11562)]
* 2025 January Backports https://github.com/k3s-io/k3s/pull/11588[(#11588)]
* Load kernel modules for nft in agent setup https://github.com/k3s-io/k3s/pull/11596[(#11596)]
* Fix local password validation when bind-address is set https://github.com/k3s-io/k3s/pull/11611[(#11611)]
* Update to v1.31.5-k3s1 and Go 1.22.10 https://github.com/k3s-io/k3s/pull/11621[(#11621)]
* Remove local restriction for deferred node password validation https://github.com/k3s-io/k3s/pull/11649[(#11649)]

'''

== Release https://github.com/k3s-io/k3s/releases/tag/v1.31.4+k3s1[v1.31.4+k3s1]
// v1.31.4+k3s1

This release updates Kubernetes to v1.31.4, and fixes a number of issues.

For more details on what's new, see the https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.31.md#changelog-since-v1313[Kubernetes release notes].

=== Changes since v1.31.3+k3s1:

* Fix secrets-encrypt reencrypt timeout error https://github.com/k3s-io/k3s/pull/11442[(#11442)]
* Remove experimental from embedded-registry flag https://github.com/k3s-io/k3s/pull/11444[(#11444)]
* Rework loadbalancer server selection logic https://github.com/k3s-io/k3s/pull/11457[(#11457)]
** The embedded client loadbalancer that handles connectivity to control-plane elements has been extensively reworked for improved performance, reliability, and observability.
* Update coredns to 1.12.0 https://github.com/k3s-io/k3s/pull/11454[(#11454)]
* Add node-internal-dns/node-external-dns address pass-through support … https://github.com/k3s-io/k3s/pull/11464[(#11464)]
* Update to v1.31.4-k3s1 and Go 1.22.9 https://github.com/k3s-io/k3s/pull/11462[(#11462)]

'''

== Release https://github.com/k3s-io/k3s/releases/tag/v1.31.3+k3s1[v1.31.3+k3s1]
// v1.31.3+k3s1

This release updates Kubernetes to v1.31.3, and fixes a number of issues.

For more details on what's new, see the https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.31.md#changelog-since-v1312[Kubernetes release notes].

=== Changes since v1.31.2+k3s1:

* Backport E2E GHA fixes https://github.com/k3s-io/k3s/pull/11230[(#11230)]
* Backports for 2024-11 https://github.com/k3s-io/k3s/pull/11261[(#11261)]
* Update flannel and base cni plugins version https://github.com/k3s-io/k3s/pull/11247[(#11247)]
* Bump to latest k3s-root version in scripts/version.sh https://github.com/k3s-io/k3s/pull/11302[(#11302)]
* More backports for 2024-11 https://github.com/k3s-io/k3s/pull/11307[(#11307)]
* Fix issue with loadbalancer failover to default server https://github.com/k3s-io/k3s/pull/11324[(#11324)]
* Update Kubernetes to v1.31.3-k3s1 https://github.com/k3s-io/k3s/pull/11372[(#11372)]
* Bump containerd to -k3s2 to fix rewrites https://github.com/k3s-io/k3s/pull/11403[(#11403)]

'''

== Release https://github.com/k3s-io/k3s/releases/tag/v1.31.2+k3s1[v1.31.2+k3s1]

// v1.31.2+k3s1

This release updates Kubernetes to v1.31.2, and fixes a number of issues.

For more details on what's new, see the https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.31.md#changelog-since-v1311[Kubernetes release notes].

=== Changes since v1.31.1+k3s1:

* Add int test for flannel-ipv6masq https://github.com/k3s-io/k3s/pull/10904[(#10904)]
* Bump Wharfie to v0.6.7 https://github.com/k3s-io/k3s/pull/10974[(#10974)]
* Add user path to runtimes search https://github.com/k3s-io/k3s/pull/11002[(#11002)]
* Add e2e test for advanced fields in services https://github.com/k3s-io/k3s/pull/11023[(#11023)]
* Launch private registry with init https://github.com/k3s-io/k3s/pull/11048[(#11048)]
* Backports for 2024-10 https://github.com/k3s-io/k3s/pull/11054[(#11054)]
* Allow additional Rootless CopyUpDirs through K3S_ROOTLESS_COPYUPDIRS https://github.com/k3s-io/k3s/pull/11041[(#11041)]
* Bump containerd to v1.7.22 https://github.com/k3s-io/k3s/pull/11072[(#11072)]
* Simplify svclb ds https://github.com/k3s-io/k3s/pull/11079[(#11079)]
* Add the nvidia runtime cdi https://github.com/k3s-io/k3s/pull/11093[(#11093)]
* Revert "Make svclb as simple as possible" https://github.com/k3s-io/k3s/pull/11118[(#11118)]
* Fixes "file exists" error from CNI bins when upgrading k3s https://github.com/k3s-io/k3s/pull/11125[(#11125)]
* Update Kubernetes to v1.31.2 https://github.com/k3s-io/k3s/pull/11155[(#11155)]

'''

== Release https://github.com/k3s-io/k3s/releases/tag/v1.31.1+k3s1[v1.31.1+k3s1]

// v1.31.1+k3s1

This release updates Kubernetes to v1.31.1, and fixes a number of issues.
For more details on what's new, see the https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.31.md#changelog-since-v1310[Kubernetes release notes].

=== Changes since v1.31.0+k3s1:

* Testing And Secrets-Encryption Backports for 2024-09 https://github.com/k3s-io/k3s/pull/10802[(#10802)]
 ** Remove secrets encryption controller
 ** Cover edge case when on new minor release for E2E upgrade test
* Update CNI plugins version https://github.com/k3s-io/k3s/pull/10817[(#10817)]
* Backports for 2024-09 https://github.com/k3s-io/k3s/pull/10842[(#10842)]
* Fix hosts.toml header var https://github.com/k3s-io/k3s/pull/10871[(#10871)]
* Update Kubernetes to v1.31.1 https://github.com/k3s-io/k3s/pull/10895[(#10895)]
* Update Kubernetes to v1.31.1-k3s3 https://github.com/k3s-io/k3s/pull/10910[(#10910)]

'''

== Release https://github.com/k3s-io/k3s/releases/tag/v1.31.0+k3s1[v1.31.0+k3s1]

// v1.31.0+k3s1

This release is K3S's first in the v1.31 line. This release updates Kubernetes to v1.31.0.

For more details on what's new, see the https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.31.md#changelog-since-v1300[Kubernetes release notes].

=== Changes since v1.30.4+k3s1:

* Move test-compat docker test to GHA https://github.com/k3s-io/k3s/pull/10414[(#10414)]
* Check for bad token permissions when install via PR https://github.com/k3s-io/k3s/pull/10387[(#10387)]
* Bump k3s-root to v0.14.0 https://github.com/k3s-io/k3s/pull/10466[(#10466)]
 ** The k3s bundled userspace has been bumped to a release based on buildroot 2024.02.3, addressing several CVEs in busybox and coreutils.
* Fix INSTALL_K3S_PR support https://github.com/k3s-io/k3s/pull/10472[(#10472)]
* Add `data-dir` to uninstall and killall scripts https://github.com/k3s-io/k3s/pull/10473[(#10473)]
* Bump github.com/hashicorp/go-retryablehttp from 0.7.4 to 0.7.7 https://github.com/k3s-io/k3s/pull/10400[(#10400)]
* Bump golang:alpine image version https://github.com/k3s-io/k3s/pull/10359[(#10359)]
* Bump Local Path Provisioner version https://github.com/k3s-io/k3s/pull/10394[(#10394)]
* Ensure remotedialer kubelet connections use kubelet bind address https://github.com/k3s-io/k3s/pull/10480[(#10480)]
 ** Fixed an issue where setting the `--bind-address` flag to a non-loopback or wildcard address would prevent `kubectl logs` from working properly.
* Bump Trivy version https://github.com/k3s-io/k3s/pull/10339[(#10339)]
* Add etcd s3 config secret implementation https://github.com/k3s-io/k3s/pull/10340[(#10340)]
 ** A proxy can now be configured for use when uploading etcd snapshots to a s3-compatible storage service. This overrides any proxy settings passed via environment variables.
 ** Credentials and endpoint configuration for storing etcd snapshots on a s3-compatible storage service can now be read from a Secret, instead of passing them via the CLI or config file. See https://github.com/k3s-io/k3s/blob/master/docs/adrs/etcd-s3-secret.md for more information.
* For E2E upgrade test, automatically determine the channel to use https://github.com/k3s-io/k3s/pull/10461[(#10461)]
* Bump kine to v0.11.11 https://github.com/k3s-io/k3s/pull/10494[(#10494)]
* Fix loadbalancer reentrant rlock https://github.com/k3s-io/k3s/pull/10511[(#10511)]
 ** Fixed an issue that could cause the agent loadbalancer to deadlock when the currently in-use server goes down.
* Don't use server value from config file for etcd-snapshot commands https://github.com/k3s-io/k3s/pull/10514[(#10514)]
 ** The `--server` and `--token` flags for the `k3s etcd-snapshot` command have been renamed to `--etcd-server` and `--etcd-token`, to avoid unintentionally running snapshot management commands against a remote node when the cluster join address or token are present in a config file.
* Use pagination when listing large numbers of resources https://github.com/k3s-io/k3s/pull/10527[(#10527)]
* Fix multiple issues with servicelb https://github.com/k3s-io/k3s/pull/10552[(#10552)]
 ** Fixed issue that caused ServiceLB to fail to create a daemonset for services with long names
 ** Fixed issue that caused ServiceLB pods to crashloop on nodes with ipv6 disabled at the kernel level
* Enhance E2E Hardened option https://github.com/k3s-io/k3s/pull/10558[(#10558)]
* Allow Pprof and Superisor metrics in standalone mode https://github.com/k3s-io/k3s/pull/10576[(#10576)]
* Use higher QPS for secrets reencryption https://github.com/k3s-io/k3s/pull/10571[(#10571)]
* Fix issues loading data-dir value from env vars or dropin config files https://github.com/k3s-io/k3s/pull/10591[(#10591)]
* Remove deprecated use of wait. functions https://github.com/k3s-io/k3s/pull/10546[(#10546)]
* Wire lasso metrics up to metrics endpoint https://github.com/k3s-io/k3s/pull/10528[(#10528)]
* Update stable channel to v1.30.3+k3s1 https://github.com/k3s-io/k3s/pull/10647[(#10647)]
* Bump docker/docker to v25.0.6 https://github.com/k3s-io/k3s/pull/10642[(#10642)]
* Add a change for killall to not unmount server and agent directory https://github.com/k3s-io/k3s/pull/10403[(#10403)]
* Allow edge case OS rpm installs https://github.com/k3s-io/k3s/pull/10680[(#10680)]
* Bump containerd to v1.7.20 https://github.com/k3s-io/k3s/pull/10659[(#10659)]
* Update to newer OS images for install testing https://github.com/k3s-io/k3s/pull/10681[(#10681)]
* Bump helm-controller to v0.16.3 to drop Helm v2 support https://github.com/k3s-io/k3s/pull/10628[(#10628)]
* Add toleration support to ServiceLB DaemonSet https://github.com/k3s-io/k3s/pull/10687[(#10687)]
 ** {blank}
  *** *New Feature*: Users can now define Kubernetes tolerations for ServiceLB DaemonSet directly in the `svccontroller.k3s.cattle.io/tolerations` annotation on services.
* Fix: Add $SUDO prefix to transactional-update commands in install script https://github.com/k3s-io/k3s/pull/10531[(#10531)]
* Update to v1.30.3-k3s1 and Go 1.22.5 https://github.com/k3s-io/k3s/pull/10707[(#10707)]
* Fix caching name for e2e vagrant box https://github.com/k3s-io/k3s/pull/10695[(#10695)]
* Fix k3s-killall.sh support for custom data dir https://github.com/k3s-io/k3s/pull/10709[(#10709)]
* Adding MariaDB to README.md https://github.com/k3s-io/k3s/pull/10717[(#10717)]
* Bump Trivy version https://github.com/k3s-io/k3s/pull/10670[(#10670)]
* V1.31.0-k3s1 https://github.com/k3s-io/k3s/pull/10715[(#10715)]
* Update kubernetes to v1.31.0-k3s3 https://github.com/k3s-io/k3s/pull/10780[(#10780)]

'''
